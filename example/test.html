<!DOCTYPE html>
<html>

<head>
    <!-- <script type="text/javascript" src="../static/vite.min.js"></script> -->
    <script type="text/javascript" src="../dist/vitejs/index.web.js"></script>
    <script type="text/javascript">
        console.log(ViteJS)
        let privKey = 'a1963e3e8c35b5d63661d922f6a18d65f5b4a2708d8e646511258561a06bd7202a7fb100492b466fca4ac7c4dfc86db8ce4fe8d0b0b29d71ef4ff2c9af99209d';
        let block = {
            accountAddress: "vite_155e4e83fb0499dcc3047e0458bbfae77f2ac1270e38c176f8",
            blockType: 4,
            fee: "0",
            fromBlockHash: "bcaca3b5ac201d7bd9b58dfbd398ea36ce0c4d1de63e8459bc48611cee0e3dee",
            hash: "c01d8671ac1a1f6f6952a7b281fc8ff26ea01da883c72c33da6a08ed45f76542",
            height: "9",
            prevHash: "aba4cc63f530c69cd0f5eef154065b22aee7c6bba62770cb98fc9be31049ac71",
            publicKey: "Kn+xAEkrRm/KSsfE38htuM5P6NCwsp1x70/yya+ZIJ0=",
            signature: "Ev3gue6g0IQxBsznFHJIttDKGRMPOPyQzKc0fttTh9hBA9l19+1bXLbMAvaX5jMsr4zgroT4nVaVjb2VIF4LAQ==",
            snapshotHash: "afb7c8366d593465ab7211235c915bbda286ff1d345e6fccebeb709d311b09ab",
            timestamp: 1543924388
        }

        let r = ViteJS.utils.tools.signTX(block, privKey);

        console.log('hash', r.hash === block.hash);
        console.log(ViteJS.utils.encoder._Buffer.from(r.signature).toString('base64'));

        // let HTTP_RPC = new ViteJS.HTTP_RPC({});
        // let ViteJSLibs = new ViteJS(HTTP_RPC);

        // function keystore() {
        //     let k_addr = ViteJSLibs.Vite.Account.newHexAddr();
        //     let keystore = ViteJSLibs.Wallet.Keystore.encrypt(k_addr, '1');
        //     console.log('Test new addr and keystore', !!keystore);

        //     let keyJSON = {'hexaddress':'vite_5f03e33f9550155548bf0a045a7a602384d3f1a65fb2ceff6b','id':'71b3bd76-a938-403d-b876-57ca22f993f3','crypto':{'ciphername':'aes-256-gcm','ciphertext':'03d8f2773ddce6132a5ceb136ba736ae1640ba2d664f2a8493a2f3ff2bb84dec8a3229edad6031a7ef494946852d3e3a45b0b3a88eb3167b41a3843d01d93c9abe52479f582b694e9c378dfb5aac7eb5','nonce':'a6bb299c35e48960e096351d','kdf':'scrypt','scryptparams':{'n':262144,'r':8,'p':1,'keylen':32,'salt':'a35724d6c46cb59e47c893a2bba3875c5b238c8a9ce9b2b1b3c4c0f6dec618db'}},'keystoreversion':1,'timestamp':1536059534};
        //     let privKey = ViteJSLibs.Wallet.Keystore.decrypt(JSON.stringify(keyJSON), '1');
        //     let k = ViteJSLibs.Vite.Account.newHexAddr(privKey);
        //     console.log('Test keystore', k.hexAddr === keyJSON.hexaddress);
        // }
        // keystore();

        // function hd() {
        //     const WalletHD = ViteJSLibs.Wallet.HD;

        //     let mnemonic = 'truck female picnic cactus mountain around keen letter brass assume night air shallow predict gap scheme again moon drive slender tone coin stairs seven';
        //     let seed = 'f3ceb491b91476cc604e7fe57fd30483aa4611c705d7ef0591bd3a1ff23071c2ce3d88f8959cbafb9fd99d079b91ea863704c9d5447a83ad09661f3c1db33d60';

        //     let s = WalletHD.getSeed(mnemonic);
        //     console.log('Test hd seed', s.seed === seed);

        //     let addr = WalletHD.getAddrFromPath('m/44\'/999\'/5\'', seed);
        //     console.log('Test hd addr', addr.hexAddr === 'vite_af6fdd10ed33d0317b21cf11f3df0bf9f79948790d36b9e2e8')
        // }
        // hd();
    </script>
</head>

<body>
    <h1>HELLO VITE.JS</h1>
</body>

</html>